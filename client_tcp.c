// programme tcpclient permettant de dialoguer avec un tcpserver// en echangeant des caracteres frappes au clavier (simulation telnet)#include<stdio.h>#include<sys/types.h>#include<sys/socket.h>#include<netinet/in.h>#include<netdb.h> //seulement utile pour client (gethostbyname)#define LEPORT 2345int taille, taille1, taille2, bd, un_entier;struct sockaddr_in padin; //adresse du serveurstruct hostent *host; //pointeur vers les info sur serveurint lg=80;char msg[80], msg1[80];char c;char *name = "minnie.ensem.inpl-nancy.fr";struct sockaddr *p_adr;int *p_lgadr;int sens=2;int V_connect;int V_write;int V_read;int V_shutdown;int main(){//1-creation d'un socketint s=0;s=socket(AF_INET, SOCK_STREAM, AF_UNSPEC);if (s==-1){	printf("Erreur de creation socket\n");	exit(-1);}printf("Le socket est identifie par : %d\n",s);//2-obtenir info du serveur  taille = sizeof(struct sockaddr_in);  bzero((char*)&padin,taille);//si on a le DNS: //if ((host = gethostbyname(name))==NULL){perror("Nom de machine serveur"); exit(2);}; // bcopy(host -> h_addr, &padin.sin_addr,host -> h_length); //  printf("adresse du serveur: %lx\n",host->h_addr); //sion, on donner l'adresse ip directement:char *adr_serv="193.50.57.50";un_entier=inet_aton(adr_serv,&padin.sin_addr);  padin.sin_port = htons(LEPORT);  padin.sin_family = AF_INET;//3-programme clientprintf("Je contacte le serveur\n");V_connect=connect(s,(char*) &padin,taille);if (V_connect==-1){	perror("Problème d'accord sur l'etablissement de connexion\n");	exit(-4);}printf("Connexion etabli. J'ai le serveur\n");while (1) {	c=getchar();	V_write=write(s, &c, 1);	if (V_write==-1)	{		perror("Problème d'ecriture\n");		exit(-4);	}	printf("%c\n",c);	V_read = read(s,&c,1);	if (V_read==-1)	{		perror("Problème de lecture\n");		exit(-4);	}	printf("%c\n",c);} //fin whileV_shutdown=shutdown(s,sens);	if (V_shutdown==-1)	{		perror("Problème de fin de session\n");		exit(-4);	}close(s);}; //fin main()